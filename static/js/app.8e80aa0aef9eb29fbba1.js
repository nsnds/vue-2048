webpackJsonp([1],{NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("i8gr"),n=i("KH7x"),r=i.n(n),a=i("kfHR"),o=i.n(a),l={name:"Index",data:function(){return{score:0,bestScore:localStorage.getItem("bestScore")||0,over:!1,list:[],size:4,pr:.9,intiNum:[2,4],direction:[{x:0,y:-1},{x:0,y:1},{x:-1,y:0},{x:1,y:0}]}},mounted:function(){this.init()},methods:{init:function(){this.newGame(),document.addEventListener("keyup",this.keyDown)},newGame:function(){var t=this;this.score=0,this.over=!1,this.list=o()(Array(this.size)).map(function(){return Array(t.size).fill(void 0)}),this.setRandom()},setRandom:function(){if(this.hasAvailableCells()){var t=this.randomAvailableCells(),e=r()(t,2),i=e[0],s=e[1];this.list[i][s]=this.randomValue()}},randomValue:function(){return Math.random()<this.pr?this.intiNum[0]:this.intiNum[1]},randomAvailableCells:function(){var t=this.availableCells();if(t.length)return t[Math.floor(Math.random()*t.length)]},availableCells:function(){var t=void 0,e=void 0,i=[],s=this.size,n=this.list;for(t=0;t<s;t++)for(e=0;e<s;e++)n[t][e]||i.push([t,e]);return i},hasAvailableCells:function(){return!!this.availableCells().length},hasMergedCells:function(){for(var t=this.size,e=0;e<t;e++)for(var i=0;i<t;i++){var s=this.list[e][i];if(s)for(var n=0;n<4;n++){var r=this.direction[n];if(this.withinBounds(e+r.x,i+r.y)){var a=this.list[e+r.x][i+r.y];if(a&&a===s)return!0}}}return!1},withinBounds:function(t,e){var i=this.size;return t>0&&e>0&&t<i&&e<i},isAvailable:function(){return this.hasAvailableCells()||this.hasMergedCells()},keyDown:function(t){switch(t.keyCode){case 38:this.move(1),this.setRandom();break;case 40:this.move(3),this.setRandom();break;case 37:this.move(0),this.setRandom();break;case 39:this.move(2),this.setRandom()}},move:function(t){var e=this,i=this.rotate(o()(this.list),t).map(function(t){return e.moveLeft(t)});this.list=this.rotate(i,4-t),this.setLocalstorage(),this.isAvailable()||(this.over=!0)},moveLeft:function(t){for(var e=this,i=[],s=this.size,n=0;n<s;n++)t[n]&&i.push({x:n,merged:!1,value:t[n]});return i.forEach(function(s){var n=e.farthestPosition(t,s),r=t[n-1];r&&r===s.value&&!i[n-1].merged?(t[n-1]=2*r,t[s.x]=void 0,s={x:n-1,merged:!0,value:r},e.score+=2*r):n!==s.x&&(t[n]=s.value,t[s.x]=void 0,s.x=n)}),t},rotate:function(t,e){if(0===(e%=4))return t;var i=void 0,s=void 0,n=this.size,r=o()(Array(n)).map(function(){return Array(n).fill(void 0)});for(i=0;i<n;i++)for(s=0;s<n;s++)r[n-1-i][s]=t[s][i];return e>1&&(r=this.rotate(r,e-1)),r},farthestPosition:function(t,e){for(var i=e.x;i>0&&!t[i-1];)i-=1;return i},setLocalstorage:function(){var t=localStorage.getItem("bestScore");t?this.score>t&&(localStorage.setItem("bestScore",this.score),this.bestScore=this.score):(localStorage.setItem("bestScore",this.score),this.bestScore=this.score)}}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrapper"},[i("div",{staticClass:"head"},[i("h1",{staticClass:"title"},[t._v("2048")]),t._v(" "),i("div",{staticClass:"score"},[i("div",[i("span",[t._v("SCORE")]),t._v(" "),i("span",{staticClass:"num"},[t._v(t._s(t.score))])]),t._v(" "),i("div",[i("span",[t._v("BEST")]),t._v(" "),i("span",{staticClass:"num"},[t._v(t._s(t.bestScore))])])])]),t._v(" "),i("div",{staticClass:"btn btn-mg",on:{click:t.newGame}},[t._v("新游戏")]),t._v(" "),i("div",[t.over?i("div",{staticClass:"over"},[i("p",[t._v("Game over!")]),t._v(" "),i("div",{staticClass:"btn",on:{click:t.newGame}},[t._v("Try again")])]):t._e(),t._v(" "),i("div",{staticClass:"box"},t._l(t.list,function(e,s){return i("div",{key:s,staticClass:"row"},t._l(e,function(e,s){return i("div",{key:s,staticClass:"col",class:"n-"+e},[t._v(t._s(e))])}))}))])])},staticRenderFns:[]};var v={name:"App",components:{Index:i("Z0/y")(l,c,!1,function(t){i("Skkm")},"data-v-a43e6850",null).exports}},h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Index")],1)},staticRenderFns:[]};var u=i("Z0/y")(v,h,!1,function(t){i("ZbSr")},null,null).exports;s.a.config.productionTip=!1,new s.a({el:"#app",render:function(t){return t(u)}})},Skkm:function(t,e){},ZbSr:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.8e80aa0aef9eb29fbba1.js.map